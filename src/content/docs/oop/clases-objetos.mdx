---
title: Objetos y Herencia
description: Definicion y uso de objetos en Lenguaje Quetzal, incluyendo herencia simple, en cascada y multiple.
---

import { Aside } from '@astrojs/starlight/components';

Los objetos en Quetzal permiten agrupar datos y comportamientos. Se definen con la palabra clave `objeto` seguida del nombre y un bloque de miembros.

## Declaracion basica

```qz
objeto Usuario {
    texto nombre
    entero edad

    Usuario(texto nombre, entero edad) {
        ambiente.nombre = nombre
        ambiente.edad = edad
    }

    texto obtener_nombre() {
        retornar ambiente.nombre
    }
}
```

- Los atributos declarados fuera de `privado` o `publico` son publicos por defecto.
- Los constructores usan el mismo nombre del objeto y no retornan valor explicito.

## Instanciacion

```qz
Usuario persona = nuevo Usuario("Maria", 30)
texto nombre = persona.obtener_nombre()
```

## Bloques `privado` y `publico`

```qz
objeto Banco {
    privado:
        numero var saldo = 0

        numero obtener_saldo_privado() {
            retornar ambiente.saldo
        }

    publico:
        Banco(numero inicial) {
            ambiente.saldo = inicial
        }

        numero obtener_saldo() {
            retornar ambiente.obtener_saldo_privado()
        }
}
```

- Los miembros dentro de `privado` solo estan disponibles dentro del objeto.
- Los miembros en `publico` pueden usarse desde cualquier parte.

## Miembros libres

Los miembros declarados con la palabra `libre` actuan como miembros estaticos: pueden invocarse sin crear una instancia y no acceden al estado del objeto instanciado.

```qz
objeto MatematicaBasica {
    libre numero PI = 3.14159

    libre numero sumar(numero a, numero b) {
        retornar a + b
    }
}

numero resultado = MatematicaBasica.sumar(2, 3)
```

## Mutabilidad de atributos

- Los atributos son inmutables a menos que se declaren con `var` dentro del objeto.
- Para modificar desde metodos publicos usa `ambiente`.

```qz
objeto Contador {
    entero var valor = 0

    vacio incrementar() {
        ambiente.valor++
    }
}
```

---

## Herencia

Quetzal soporta herencia de objetos mediante la palabra clave `como`. Esto permite crear jerarquias de objetos donde los hijos heredan atributos y metodos de los padres.

### Herencia simple

Para heredar de un objeto padre, usa `como` seguido del nombre del objeto padre:

```qz
objeto Animal {
    privado:
        texto var nombre
        texto var especie
    publico:
        Animal(texto nombre, texto especie) {
            ambiente.nombre = nombre
            ambiente.especie = especie
        }

        texto obtener_nombre() {
            retornar ambiente.nombre
        }

        texto obtener_especie() {
            retornar ambiente.especie
        }

        vacio comer() {
            consola.mostrar("El animal come.")
        }
}

objeto Perro como Animal {
    publico:
        Perro(texto nombre, texto especie) {
            padre.Animal(nombre, especie)
        }

        texto ladrar() {
            retornar "Guau!"
        }
}
```

<Aside type="tip">
Usa `padre.NombreObjeto(argumentos)` dentro del constructor del hijo para invocar el constructor del padre.
</Aside>

### Uso del objeto heredado

```qz
// Instanciar el objeto hijo
Perro perro1 = nuevo Perro("Firulais", "Canino")

// Acceder a metodos propios
texto sonido = perro1.ladrar()  // "Guau!"

// Acceder a metodos heredados del padre
texto nombre = perro1.obtener_nombre()    // "Firulais"
texto especie = perro1.obtener_especie()  // "Canino"
```

### Herencia en cascada

Puedes crear cadenas de herencia donde un objeto hereda de otro que a su vez hereda de un tercero:

```qz
objeto Mamifero como Animal {
    publico:
        Mamifero(texto nombre, texto especie) {
            padre.Animal(nombre, especie)
        }

        texto comer() {
            retornar "El mamifero come."
        }
}

objeto Gato como Mamifero {
    publico:
        Gato(texto nombre, texto especie) {
            padre.Mamifero(nombre, especie)
        }

        texto maullar() {
            retornar "Miau!"
        }
}
```

En este ejemplo:
- `Gato` hereda de `Mamifero`
- `Mamifero` hereda de `Animal`
- `Gato` tiene acceso a metodos de `Mamifero` y `Animal`

```qz
Gato gato1 = nuevo Gato("Michi", "Felino")
texto nombre = gato1.obtener_nombre()  // Heredado de Animal
texto sonido = gato1.maullar()         // Propio de Gato
```

### Herencia multiple

Quetzal permite heredar de multiples objetos padre separandolos con comas:

```qz
objeto Felino como Mamifero, Animal {
    publico:
        Felino(texto nombre, texto especie) {
            padre.Mamifero(nombre, especie)
            padre.Animal(nombre, especie)
        }

        texto comer() {
            retornar padre.Mamifero.comer()
        }

        texto rugir() {
            retornar "Rugido!"
        }
}
```

<Aside type="caution">
Al usar herencia multiple, debes llamar explicitamente a los constructores de todos los padres y resolver conflictos de metodos usando `padre.NombrePadre.metodo()`.
</Aside>

### Sobrescribir metodos

Puedes sobrescribir metodos del padre definiendo un metodo con el mismo nombre en el hijo:

```qz
objeto Animal {
    publico:
        texto describir() {
            retornar "Soy un animal"
        }
}

objeto Perro como Animal {
    publico:
        Perro() {
            padre.Animal()
        }

        // Sobrescribe el metodo del padre
        texto describir() {
            retornar "Soy un perro"
        }
}

Perro perro = nuevo Perro()
consola.mostrar(perro.describir())  // "Soy un perro"
```

### Acceder a metodos del padre

Desde un metodo sobrescrito, puedes llamar al metodo original del padre:

```qz
objeto Gato como Animal {
    publico:
        Gato() {
            padre.Animal()
        }

        texto describir() {
            texto descripcion_base = padre.Animal.describir()
            retornar descripcion_base + ", especificamente un gato"
        }
}
```

---

## Exportar objetos

Los objetos pueden exportarse desde un modulo y reutilizarse en otros archivos.

```qz
exportar {
    Usuario,
    Banco,
    Animal,
    Perro
}
```

Consulta las secciones de constructores y modificadores de acceso para profundizar en cada caracteristica.
